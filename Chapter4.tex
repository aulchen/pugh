\documentclass{article}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}

\newenvironment{proof}{\paragraph{Proof:}}{\hfill$\square$}
\newtheorem{theorem}{Theorem}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}

\newcommand{\R}{\mathbb{R}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\N}{\mathbb{N}}

\newcommand{\B}{\mathbb{B}}
\newcommand{\var}{\text{var}}

\author{Arthur Chen}
\title{Chapter 4 Function Spaces}
\date{\today}

\begin{document}
\maketitle

In these exercises, $C^0 = C^0([a, b], \R)$ is the space of continuous real-valued functions defined on the closed interval $[a, b]$. It is equipped with the usp norm, $||f|| = \sup \{|f(x)|: x \in [a, b]\}$.

\section*{Problem 1}

Let $M, N$ be metric spaces.

\subsection*{Part a}

Formulate the concepts of pointwise convergence and uniform convergence for sequences of functions $f_n: M \rightarrow N$.

A sequence of functions $f_n: M \rightarrow N$ converges pointwise to a limit function $f: M \rightarrow N$ if for all $x \in M$ we have

\[
\lim_{n \rightarrow \infty} d_n(f_n(x), f(x)) = 0
\]

A sequence of functions converges uniformly to a limit function if for all $\epsilon > 0$, there is an $N$ such that for all $n \geq N$ and all $x \in M$,

\[
d_N(f_n(x), f(x)) < \epsilon
\]

\subsection*{Part b}

For which metric spaces are these concepts equivalent?

TODO. The immediate thing that springs to mind are trivial metric spaces with only one point, 

\section*{Problem 3}

Let $f_n: [a, b] \rightarrow \R$ be a sequence of piecewise continuous functions, each of which is continuous at the point $x_0 \in [a, b]$. Assume that $f_n \rightrightarrows f$.

\subsection*{Part a}

Prove that $f$ is continuous at $x_0$.

The proof is as similar to Theorem 1 in the book. Let $\epsilon > 0$ be given. By uniform convergence, there exists an $N$ such that for all $n \geq N$ and $x \in [a, b]$ we have

\[
|f_n(x) - f(x)| < \frac{\epsilon}{3}
\]

All the $f_n$ are continuous at $x_0$, so $f_N$ is continuous at $x_0$. This implies that there is a $\delta > 0$ such that $|x-x_0| < \delta$ implies

\[
|f_N(x) - f_N(x_0)| < \frac{\epsilon}{3}
\]

Thus, if $|x - x_0| < \delta$, then by the Triange inequality,

\begin{align*}
|f(x) - f(x_0)| &\leq |f(x) - f_N(x)| + |f_N(x) - f_N(x_0)| + |f_N(x_0) - f(x_0)| \\
&\leq \frac{\epsilon}{3} + \frac{\epsilon}{3} +\frac{\epsilon}{3} = \epsilon
\end{align*}

which shows that $f$ is continuous at $x_0$.

\subsection*{Part b}

Prove or disprove that $f$ is piecewise continuous.

$f$ is not piecewise continuous. A function $f: [a, b] \rightarrow \R$ is piecewise continuous if it has finitely many discontinuities.

Let $f: [0, 1] \rightarrow \R$ be the following function:

\[
f(x) = 
\begin{cases}
0 & x \in \R - \Q \\
\frac{1}{q} & x = \frac{p}{q}: \gcd(p, q) = 1; p, q \in \Z \\
1 & x = 0
\end{cases}
\]

Let $f_n: [0, 1] \rightarrow \R$ be the rational ruler function. Specifically,  for $n = 1, 2 \dots$

\[
f_n(x) = 
\begin{cases}
\frac{1}{q} & x = \frac{p}{q}: \gcd(p, q) = 1; p, q \in 1, 2 \dots n \\
1 & x = 0 \\
\frac{1}{n} & \text{ else}
\end{cases}
\]

Thus $f_1$ is $1$ everywhere, $f_2$ is $1$ at $0$ and $1$ and $1/2$ everywhere else, $f_4$ is $1$ at $0$ and $1$, $1/2$ at $1/2$, $1/3$ at $1/3$ and $2/3$, $1/4$ everywhere else, etc.

$f_n(x) = f(x)$ when $x$ is a rational number in reduced form with denominator $\leq n$. Everywhere else, $f(x) \geq 0$, and $f_n(x) = \frac{1}{n}$ imply $f_n(x) - f(x) \leq \frac{1}{n}$, which approaches zero as $n$ goes to infinity. Thus $f_n \rightrightarrows f$. Similarly, $f_n$ is piecewise continuous, since it only has $1 + 2 + 3 \dots + n-1$ discontinuities, which is finite. However, $f$ is discontinuous at all rational numbers, and is thus is not piecewise continuous.

\section*{Problem 4}

\subsection*{Part a}

If $f_n: \R \rightarrow \R$ is uniformly continuous for each $n \in \N$ and if $f_n \rightrightarrows f$ as $n \rightarrow \infty$, prove or disprove that $f$ is uniformly continuous.

$f$ is uniformly continuous. Let $\epsilon > 0$ be arbitrary. Then by uniform convergence, there exists $N$ such that $n \geq N$ implies that $||f - f_n||_{\sup} < \frac{\epsilon}{3}$. By the uniform continuity of $f_n$, there exists $\delta > 0$ such that $|x - y| < \delta$ implies $|f_n(x) - f_n(y)| < \frac{\epsilon}{3}$, which is equivalent to $\max_{a \in [x, y]} f_n(a) - \min_{a \in [x, y]} f_n(a) < \frac{\epsilon}{3}$. Because $||f - f_n||_{\sup} < \frac{\epsilon}{3}$, this implies that for $|x-y| < \delta$,

\[
\max_{|x-y| < \delta} f(y) - \min_{|x-y| < \delta} f(a) < \epsilon
\]

which is equivalent to uniform continuity.

\subsection*{Part b}

What happens for functions from one metric space to another instead of $\R$ to $\R$?

The same things happen. Let $f: M \rightarrow N$. The supremum norm is well defined for functions from $M$ to $N$. For uniform continuity, there exists $\delta > 0$ such that $d_M(x, y) < \delta$ implies $d_N(f_n(x), f_n(y)) < \frac{\epsilon}{3}$, which is equivalent to

\[
\sup_{d_M(x, y) < \delta} f_n(y) - \inf_{d_M(x, y) < \delta} f_n(y) < \frac{\epsilon}{3}
\]

Combined with $||f - f_n||_{\sup} < \frac{\epsilon}{3}$, this implies that

\[
\sup_{d_M(x, y) < \delta} f(y) - \inf_{d_M(x, y) < \delta} f(y) < \epsilon
\]

which implies uniform continuity.

\section*{Problem 5}

Suppose that $f_n: [a, b] \rightarrow \R$ and $f_n \rightrightarrows f$ as $n \rightarrow \infty$. Which of the following discontinuity properties of the functions $f_n$ carry over to the limit function?

\subsection*{Part a}

No discontinuities.

This is immediate. By the theorems in the book, the uniform limit of continuous functions is continuous.

\subsection*{Part b}

At most ten discontinuities.

We begin with a lemma on how discontinuities in the limiting function imply discontinuities in the sequence.

\begin{lemma}
Let $f_n, f$ be as described in the problem, and let $f$ be discontinuous at $x_0$. Then there exists $N \in \N$ such that for all $n \geq N$, $f_n$ is discontinuous at $x_0$.

\begin{proof}
Suppose not. Then for all $k \in \N$, there exists an $a > k$ such that $f_a$ is continuous at $x_0$.  By uniform convergence, there exists $N \in \N$ such that for all $n \geq N$, $|f_n - f|_{\sup} < \frac{\epsilon}{3}$. Choose $n \geq N$ such that $f_n$ is continuous at $x_0$.

Let $\epsilon > 0$ be arbitrary. By the continuity of $f_n$, there exists $\delta > 0$ such that $|x-x_0| < \delta$ implies $|f_n(x) - f_n(x_0)| < \frac{\epsilon}{3}$. Because $n \geq N$, $|f_n - f|_{\sup} < \frac{\epsilon}{3}$ implies that for all $x \in (x_0-\delta, x_0 + \delta)$,

\[
|f(x) - f(x_0)| < \epsilon
\]

implies that $f$ is continuous at $x_0$, contradicting the assumption that $f$ is discontinuous at $x_0$. Thus there is some $k \in \N$ such that for all $n \geq k$, $f_n$ is discontinuous at $x_0$.
\end{proof}
\end{lemma}

The statement is true by the contrapositive. If $f$ has more than ten discontinuities, then by the above lemma, there exists some $N \in \N$ such that for all $n \geq N$, $f_n$ has discontinuities at the discontinuities of $f$. Thus $f$ having more than ten discontinuities implies the tail of $f_n$ has more than ten discontinuities. Taking contrapositives, this implies that if the tail of $f_n$ has at most ten discontinuities, $f$ has at most ten discontinuities.

\subsection*{Part c}

At least ten discontinuities.

No. Let the interval be $[0, 1]$ and $f_n$ be the function

\[
f_n = 
\begin{cases}
\frac{1}{n} & \text{ when } x \text{ in reduced form has denominator } 10^n \\
0 & \text{ else}
\end{cases}
\]

$f_n$ has at least ten discontinuities for all $n$, but uniformly converges to the zero function, which has no discontinuities.

\subsection*{Part d}

Finitely many discontinuities.

No. From Problem 3 Part b above, there are functions with finitely discontinuities but uniformly converge to a function with infinite discontinuities.

\section*{Problem 8}

Is the sequence of functions $f_n: \R \rightarrow \R$ defined by

\[
f_n(x) = \cos(n+x) + \log(1 + \frac{1}{\sqrt{n+2}} \sin^2(n^n x))
\]

equicontinuous? Prove or disprove.

Yes, the sequence is equicontinuous. We first show that sequences of equicontinuous functions form a vector space.

\begin{lemma}
Let $f_n, g_n: \R \rightarrow \R$ be sequences of functions such that the $f_n$ are equally continuous and the $g_n$ are equally continuous. Then for all $\alpha, \beta \in \R$, $(\alpha f + \beta g)_n$ are equally continuous. In other words, equicontinuous sequences form a vector space.

\begin{proof}
Fix $\epsilon > 0$. If $\alpha, \beta \neq 0$, then there exist $\delta_f, \delta_g > 0$ such that for all $n \in \N$, $|s-t| < \delta_f$ implies

\[
|f_n(s) - f_n(t)| < \frac{\epsilon}{2 |\alpha|}
\]
and $|u -v| < \delta_g$ implies
\[
|f_n(s) - f_n(t)| < \frac{\epsilon}{2 |\beta|}
\]

Take $\delta = \min(\delta_f, \delta_g)$. Then for all $n \in \N$ and $|x-y| < \delta$,
\begin{align*}
|\alpha f_n(x) + \beta g_n(x) - \alpha f_n(y) - \beta g_n(y)| &\leq |\alpha||f_n(x) - f_n(y)| + |\beta||g_n(x) - g_n(y)| \\
&< \epsilon
\end{align*}

thus $(\alpha f + \beta g)_n$ is equicontinuous. If $\alpha$ or $\beta$ equals zero then those terms drop out of the expression, and the inequality still holds.
\end{proof}
\end{lemma}

We now prove that the cosine and log terms are equicontinuous, which combined with the above lemma show that $f$ is equicontinuous. In all that follows, let $g_n(x) = \cos(n+x)$ and $h_n(x) = \log(1 + \frac{1}{\sqrt{n+2}} \sin^2(n^n x))$.

\begin{lemma}
The $g_n$ are equally continuous.
\begin{proof}
Let $\epsilon = \delta$. $\cos(n+x) = C^1$, so by the Fundamental Theorem of Calculus

\begin{align*}
|\cos(n+t) - \cos(n+s)| &= |- \int_s^t \sin(n+x)dx| \leq \int_s^t |\sin(n+x)|dx \\
&\leq \int_s^t 1 dx = t-s < \delta = \epsilon
\end{align*}

for all $n \in \N$.
\end{proof}
\end{lemma}

We now show that the $h_n$ are equally continuous.

\begin{lemma}
\label{HnBoundedVariation}
$h_n$ has variation bounded by $\frac{1}{\sqrt{n+2}}$ for all $n \in \N$.
\begin{proof}
$h_n(x) = \log(1 + \frac{1}{\sqrt{n+2}} \sin^2(n^n x))$. The $\sin^2(n^n x)$ term has a maximum of $1$ and minimum of $0$. $\log$ is an increasing function, so 
\[
0 = \log(1) \leq h(x) \leq \log(1 + \frac{1}{\sqrt{n+2}}) \leq \frac{1}{\sqrt{n+2}}
\]

by taking the Taylor series of $\log(1+x)$ and truncating after the first term. $\frac{1}{\sqrt{n+2}} < 1$ for $n \in \N$, so the Taylor series converges.
\end{proof}
\end{lemma}

\begin{theorem}
The $h_n$ are equally continuous.
\begin{proof}
Let $\epsilon > 0$ be arbitrary. By Lemma \ref{HnBoundedVariation}, $\var(h_n) \leq \frac{1}{\sqrt{n+2}}$. When $n$ is large enough such that $\frac{1}{\sqrt{n+2}} < \epsilon$, the conditions for equicontinuity are automatically met, since for all intervals, $\var(h_n) < \epsilon$. Let $N \in \N$ be the largest $n$ such that $\frac{1}{\sqrt{n+2}} \geq \epsilon$. Since $\frac{1}{\sqrt{n+2}} \rightarrow 0$, $N$ exists and is finite.

Computing $h'_n$,
\[
h'_n(x) = \frac {
\frac{1}{\sqrt{n+2}} n^n 2 \sin(n^n x) \cos(n^n x)
}{
1 + \frac{1}{\sqrt{n+2}} \sin^2(n^n x)
} 
= 
\frac{
n^n \sin(2n^nx)
}{
\sqrt{n+2} + \sin^2(n^2 x)
}
\]

which implies that

\[
|h'_n(x)| \leq \frac{n^n}{\sqrt{n+2}}
\]

Since $h_n \in C^1$ for all $n \in \N$, by the Fundamental Theorem of Calculus

\begin{align*}
|h_n(t) - h_n(s)| &= |\int_s^t h'_n(x)dx| \leq \int_s^t |h'_n(x)| dx \leq \int_s^t \frac{n^n}{\sqrt{n+2}} dx = \frac{(t-s)n^n}{\sqrt{n+2}}
\end{align*}

Letting $\delta_n < \frac{\sqrt{n+2}}{n^n}\epsilon$ satisfies the bound needed for equicontinuity for a given $n$. Let $\delta = \min(\delta_1, \dots \delta_n)$. Since the $n$ are finite, this operation is well defined, and $\delta > 0$. For $n \leq N$, the above calculation shows that the variation in $h_n$ is bounded by $\epsilon$ on intervals smaller than $\delta$. For $n > N$, as shown above, $h_n$ has variation less than $\epsilon$ everywhere. Thus the $h_n$ are equicontinuous.
\end{proof}
\end{theorem}

Thus, since the $g_n$ are equicontinuous and the $h_n$ are equicontinuous, $h_n = f_n + g_n$ is equicontinuous.

\end{document}