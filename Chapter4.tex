\documentclass{article}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}

\newenvironment{proof}{\paragraph{Proof:}}{\hfill$\square$}
\newtheorem{theorem}{Theorem}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}

\newcommand{\R}{\mathbb{R}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\N}{\mathbb{N}}

\newcommand{\B}{\mathbb{B}}

\author{Arthur Chen}
\title{Chapter 4 Function Spaces}
\date{\today}

\begin{document}
\maketitle

In these exercises, $C^0 = C^0([a, b], \R)$ is the space of continuous real-valued functions defined on the closed interval $[a, b]$. It is equipped with the usp norm, $||f|| = \sup \{|f(x)|: x \in [a, b]\}$.

\section*{Problem 1}

Let $M, N$ be metric spaces.

\subsection*{Part a}

Formulate the concepts of pointwise convergence and uniform convergence for sequences of functions $f_n: M \rightarrow N$.

A sequence of functions $f_n: M \rightarrow N$ converges pointwise to a limit function $f: M \rightarrow N$ if for all $x \in M$ we have

\[
\lim_{n \rightarrow \infty} d_n(f_n(x), f(x)) = 0
\]

A sequence of functions converges uniformly to a limit function if for all $\epsilon > 0$, there is an $N$ such that for all $n \geq N$ and all $x \in M$,

\[
d_N(f_n(x), f(x)) < \epsilon
\]

\subsection*{Part b}

For which metric spaces are these concepts equivalent?

TODO. The immediate thing that springs to mind are trivial metric spaces with only one point, 

\section*{Problem 3}

Let $f_n: [a, b] \rightarrow \R$ be a sequence of piecewise continuous functions, each of which is continuous at the point $x_0 \in [a, b]$. Assume that $f_n \rightrightarrows f$.

\subsection*{Part a}

Prove that $f$ is continuous at $x_0$.

The proof is as similar to Theorem 1 in the book. Let $\epsilon > 0$ be given. By uniform convergence, there exists an $N$ such that for all $n \geq N$ and $x \in [a, b]$ we have

\[
|f_n(x) - f(x)| < \frac{\epsilon}{3}
\]

All the $f_n$ are continuous at $x_0$, so $f_N$ is continuous at $x_0$. This implies that there is a $\delta > 0$ such that $|x-x_0| < \delta$ implies

\[
|f_N(x) - f_N(x_0)| < \frac{\epsilon}{3}
\]

Thus, if $|x - x_0| < \delta$, then by the Triange inequality,

\begin{align*}
|f(x) - f(x_0)| &\leq |f(x) - f_N(x)| + |f_N(x) - f_N(x_0)| + |f_N(x_0) - f(x_0)| \\
&\leq \frac{\epsilon}{3} + \frac{\epsilon}{3} +\frac{\epsilon}{3} = \epsilon
\end{align*}

which shows that $f$ is continuous at $x_0$.

\subsection*{Part b}

Prove or disprove that $f$ is piecewise continuous.

$f$ is not piecewise continuous. A function $f: [a, b] \rightarrow \R$ is piecewise continuous if it has finitely many discontinuities.

Let $f: [0, 1] \rightarrow \R$ be the following function:

\[
f(x) = 
\begin{cases}
0 & x \in \R - \Q \\
\frac{1}{q} & x = \frac{p}{q}: \gcd(p, q) = 1; p, q \in \Z \\
1 & x = 0
\end{cases}
\]

Let $f_n: [0, 1] \rightarrow \R$ be the rational ruler function. Specifically,  for $n = 1, 2 \dots$

\[
f_n(x) = 
\begin{cases}
\frac{1}{q} & x = \frac{p}{q}: \gcd(p, q) = 1; p, q \in 1, 2 \dots n \\
1 & x = 0 \\
\frac{1}{n} & \text{ else}
\end{cases}
\]

Thus $f_1$ is $1$ everywhere, $f_2$ is $1$ at $0$ and $1$ and $1/2$ everywhere else, $f_4$ is $1$ at $0$ and $1$, $1/2$ at $1/2$, $1/3$ at $1/3$ and $2/3$, $1/4$ everywhere else, etc.

$f_n(x) = f(x)$ when $x$ is a rational number in reduced form with denominator $\leq n$. Everywhere else, $f(x) \geq 0$, and $f_n(x) = \frac{1}{n}$ imply $f_n(x) - f(x) \leq \frac{1}{n}$, which approaches zero as $n$ goes to infinity. Thus $f_n \rightrightarrows f$. Similarly, $f_n$ is piecewise continuous, since it only has $1 + 2 + 3 \dots + n-1$ discontinuities, which is finite. However, $f$ is discontinuous at all rational numbers, and is thus is not piecewise continuous.

\section*{Problem 4}

\subsection*{Part a}

If $f_n: \R \rightarrow \R$ is uniformly continuous for each $n \in \N$ and if $f_n \rightrightarrows f$ as $n \rightarrow \infty$, prove or disprove that $f$ is uniformly continuous.

$f$ is uniformly continuous. Let $\epsilon > 0$ be arbitrary. Then by uniform convergence, there exists $N$ such that $n \geq N$ implies that $||f - f_n||_{\sup} < \frac{\epsilon}{3}$. By the uniform continuity of $f_n$, there exists $\delta > 0$ such that $|x - y| < \delta$ implies $|f_n(x) - f_n(y)| < \frac{\epsilon}{3}$, which is equivalent to $\max_{a \in [x, y]} f_n(a) - \min_{a \in [x, y]} f_n(a) < \frac{\epsilon}{3}$. Because $||f - f_n||_{\sup} < \frac{\epsilon}{3}$, this implies that for $|x-y| < \delta$,

\[
\max_{|x-y| < \delta} f(y) - \min_{|x-y| < \delta} f(a) < \epsilon
\]

which is equivalent to uniform continuity.

\subsection*{Part b}

What happens for functions from one metric space to another instead of $\R$ to $\R$?

The same things happen. Let $f: M \rightarrow N$. The supremum norm is well defined for functions from $M$ to $N$. For uniform continuity, there exists $\delta > 0$ such that $d_M(x, y) < \delta$ implies $d_N(f_n(x), f_n(y)) < \frac{\epsilon}{3}$, which is equivalent to

\[
\sup_{d_M(x, y) < \delta} f_n(y) - \inf_{d_M(x, y) < \delta} f_n(y) < \frac{\epsilon}{3}
\]

Combined with $||f - f_n||_{\sup} < \frac{\epsilon}{3}$, this implies that

\[
\sup_{d_M(x, y) < \delta} f(y) - \inf_{d_M(x, y) < \delta} f(y) < \epsilon
\]

which implies uniform continuity.

\section*{Problem 5}

Suppose that $f_n: [a, b] \rightarrow \R$ and $f_n \rightrightarrows f$ as $n \rightarrow \infty$. Which of the following discontinuity properties of the functions $f_n$ carry over to the limit function?

\subsection*{Part a}

No discontinuities.

This is immediate. By the theorems in the book, the uniform limit of continuous functions is continuous.

\subsection*{Part b}

At most ten discontinuities.

We begin with a lemma on how discontinuities in the limiting function imply discontinuities in the sequence.

\begin{lemma}
Let $f_n, f$ be as described in the problem, and let $f$ be discontinuous at $x_0$. Then there exists $N \in \N$ such that for all $n \geq N$, $f_n$ is discontinuous at $x_0$.

\begin{proof}
Suppose not. Then for all $k \in \N$, there exists an $a > k$ such that $f_a$ is continuous at $x_0$.  By uniform convergence, there exists $N \in \N$ such that for all $n \geq N$, $|f_n - f|_{\sup} < \frac{\epsilon}{3}$. Choose $n \geq N$ such that $f_n$ is continuous at $x_0$.

Let $\epsilon > 0$ be arbitrary. By the continuity of $f_n$, there exists $\delta > 0$ such that $|x-x_0| < \delta$ implies $|f_n(x) - f_n(x_0)| < \frac{\epsilon}{3}$. Because $n \geq N$, $|f_n - f|_{\sup} < \frac{\epsilon}{3}$ implies that for all $x \in (x_0-\delta, x_0 + \delta)$,

\[
|f(x) - f(x_0)| < \epsilon
\]

implies that $f$ is continuous at $x_0$, contradicting the assumption that $f$ is discontinuous at $x_0$. Thus there is some $k \in \N$ such that for all $n \geq k$, $f_n$ is discontinuous at $x_0$.
\end{proof}
\end{lemma}

The statement is true by the contrapositive. If $f$ has more than ten discontinuities, then by the above lemma, there exists some $N \in \N$ such that for all $n \geq N$, $f_n$ has discontinuities at the discontinuities of $f$. Thus $f$ having more than ten discontinuities implies the tail of $f_n$ has more than ten discontinuities. Taking contrapositives, this implies that if the tail of $f_n$ has at most ten discontinuities, $f$ has at most ten discontinuities.

\subsection*{Part c}

At least ten discontinuities.

No. Let the interval be $[0, 1]$ and $f_n$ be the function

\[
f_n = 
\begin{cases}
\frac{1}{n} & \text{ when } x \text{ in reduced form has denominator } 10^n \\
0 & \text{ else}
\end{cases}
\]

$f_n$ has at least ten discontinuities for all $n$, but uniformly converges to the zero function, which has no discontinuities.

\subsection*{Part d}

Finitely many discontinuities.

No. From Problem 3 Part b above, there are functions with finitely discontinuities but uniformly converge to a function with infinite discontinuities.

\end{document}